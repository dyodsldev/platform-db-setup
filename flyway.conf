# ================================================================
# Flyway Configuration
# Clean schema structure - no DBT dependencies
# ================================================================

# ----------------------------------------------------------------
# Database Connection
# ----------------------------------------------------------------
flyway.url=${FLYWAY_URL}
flyway.user=${FLYWAY_USER}
flyway.password=${FLYWAY_PASSWORD}

# ----------------------------------------------------------------
# Schema Management
# ----------------------------------------------------------------
flyway.schemas=public,platform,lookups,audit
flyway.defaultSchema=public
flyway.createSchemas=true

# ----------------------------------------------------------------
# Migration Settings
# ----------------------------------------------------------------
flyway.locations=filesystem:sql,filesystem:callbacks
flyway.sqlMigrationPrefix=V
flyway.repeatableSqlMigrationPrefix=R
flyway.sqlMigrationSeparator=__
flyway.sqlMigrationSuffixes=.sql
flyway.encoding=UTF-8
flyway.table=flyway_schema_history

# ----------------------------------------------------------------
# Validation & Safety
# ----------------------------------------------------------------
flyway.validateOnMigrate=true
flyway.validateMigrationNaming=true
flyway.cleanDisabled=true

# ----------------------------------------------------------------
# Baseline
# ----------------------------------------------------------------
flyway.baselineOnMigrate=true
flyway.baselineVersion=0
flyway.baselineDescription=Initial baseline

# ----------------------------------------------------------------
# Placeholders
# ----------------------------------------------------------------
flyway.placeholders.database_name=${DB_NAME}
flyway.placeholders.app_user=${APP_USER:-healthcare_app}
flyway.placeholders.schema_version=${SCHEMA_VERSION:-1.0}
flyway.placeholders.environment=${ENVIRONMENT:-dev}

flyway.placeholderReplacement=true
flyway.placeholderPrefix=${
flyway.placeholderSuffix=}

# ----------------------------------------------------------------
# Advanced Settings
# ----------------------------------------------------------------
flyway.outOfOrder=false
flyway.mixed=false
flyway.group=false

# ----------------------------------------------------------------
# Performance
# ----------------------------------------------------------------
flyway.connectRetries=3
flyway.connectRetriesInterval=10
flyway.lockRetryCount=50

# ================================================================
# Schema Structure:
#   public   - Extensions & utility functions
#   platform - Application tables (facilities, users, patients)
#   lookups  - Reference/lookup tables (roles, medications, etc.)
#   audit    - Audit trail
# ================================================================